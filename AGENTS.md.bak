# AGENTS.md

- Local-first collaborative markdown with git sync and first-class agent support.
- Spec-only phase — no code yet.

## Commands

```
# None yet — project is pre-implementation
```

## How It Works

- Yjs CRDT in a local daemon, CodeMirror 6 web editor connects via y-websocket
- Relay server for multi-user collab; local replica is authoritative
- File watcher syncs local `.md` files ↔ CRDT state
- Git sync via leader election among daemons
- Agents are first-class collaborators with attribution (CRDT origin tags + server-side log)

## Structure

- `SPEC.md` — complete specification (6 parts: product, architecture, data, API, dev tooling, ops)
- `REVIEW.md` — spec review tracker with resolution status

## Git

- Check `git status`/`git diff` before commits
- Atomic commits; push only when asked
- Never destructive ops (`reset --hard`, `force push`) without explicit consent
- Conventional Commits: `feat:`, `fix:`, `docs:`, `refactor:`
- Run `br sync --flush-only` before every commit to export issues to JSONL

## Critical Thinking

- Read more code when stuck
- Document unexpected behavior
- Call out conflicts between instructions

## Engineering

- Small files (<500 LOC), descriptive paths, current header comments
- Fix root causes, not symptoms
- Simplicity > cleverness (even if it means bigger refactors)
- Aim for 100% test coverage

## UI Testing

- Use the `dev-browser` skill for testing web UI changes. Headless browser
automation with Playwright. Start server, take screenshots, verify DOM state.
